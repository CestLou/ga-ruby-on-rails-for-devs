Introducción a Git
==================

Objetivo
--------

Aprender lo básico de Git y comprender qué rol juega Github en el ecosistema de Ruby y Ruby-on-Rails. Aprender conceptos como *snapshot* (instantánea), *repository* (repositorio), *pull* (tirar) y *topical branches* (ramas temáticas).

Git
---

Git es rápido, código abierto y un sistema de control distribuido de versiones. Es diferente de CVS, SourceSafe, ClearCase, Subversion o Perforce y es en alguna manera similar a Mercurial (Hg). Distribuido significa que trabaja sin conexión. Git es un facilitador esencial del ecosistema de Ruby y Ruby-on-Rails.

Instantánea de Git
------------------

Un commit es una instantánea de todos los archivos e información meta en un momento dado de tiempo, y no las diferencias entre dos archivos.

Un nuevo repositorio en Git
---------------------------

Cree un nuevo repositorio sin conexión. Lo llamaremos *rojo*.

    $ mkdir ga
    $ cd ga
    ga$ mkdir rojo
    ga$ cd rojo

    ga/rojo$ git init
    Initialized empty Git repository in /home/dblock/sourcega/rojo/.git/

    ga/rojo$ touch README.md

    ga/rojo$ git add README.md

    ga/rojo$ git status

    # On branch master
    #
    # Initial commit
    #
    # Changes to be committed:
    #   (use "git rm --cached <file>..." to unstage)
    #
    #	new file:   README.md
    #

    ga/rojo$ git commit -m "README agregado."
    [master (root-commit) 3923738] README agregado.
     0 files changed, 0 insertions(+), 0 deletions(-)
     create mode 100644 README.md

    ga/rojo$ 

Ejercicio
---------

Modificar el contenido de *README.md* en [Markdown](http://daringfireball.net/projects/markdown/syntax) y realice un commit de los cambios.

Nuestro repositorio local
-------------------------

Nuestro commit anterior colocó los cambios en nuestro repositorio *local*, un concepto único de los sistemas de control distribuido de versiones como Git y Hg.

Examine el historial es este repositorio *local*.

    ga/rojo$ git log

    commit 392373835e0f7702251d45a088664918e9125c97
    Author: dblock
    Date:   Mon Dec 5 09:34:08 2011 -0500

    README agregado.

Enviando los cambios a un repositorio remoto
--------------------------------------------

[Cree un nuevo repositorio en Github](https://github.com/repositories/new) llamado *rojo*. Eso es un repositorio sin archivos. Github ejecuta en sus servidores los mismos comandos que nosotros hemos ejecutado localmente.

Ahora podemos conectar nuestro repositorio local *rojo* agregando la dirección del repositorio remoto llamado *origin*. El nombre *origin* es simplemente una convención.

    ga/rojo$ git remote add origin git@github.com:<username>/rojo.git

Ahora podemos ver la lista de ramas remotas:

    ga/rojo$ git remote
    origin

Enviamos todos los cambios a Github.

    ga/rojo$ git push -u origin master

La próxima vez puedes enviar todos los cambios pendientes en todas las ramas.

    ga/rojo$ git push

El opuesto de *push* (enviar) es *pull* (traer). Lo siguiente actualiza nuestra copia local de la rama remota *master*.

    ga/rojo$ git pull origin master 

Clonando
--------

Utilice `git clone` para copiar un repositorio existente en Github a tu ordenador.

    ga$ git clone git@github.com:<username>/rojo.git verde

Esto crea una nueva carpeta llamada *verde* con el contenido del repositorio *rojo*; un repositorio *local* del repositorio *remoto* en Github.

Ramas temáticas
---------------

A diferencia de otros sistemas de control de código, las ramas son baratas. En Git es considerada una buena práctica el hecho de nunca trabajar en la rama *master*, sino crear una *rama temática*. Una rama temática se crea por fuera de la rama master.

Primero, liste todas sus ramas. Verá que está en la rama *master*.

    ga/rojo$ git branch

Asegúrese que la rama *master* está up-to-date (actualizada).

    ga/rojo$ git pull origin master 

Cree una nueva rama *readme-cambios*.

    ga/rojo$ git checkout -b readme-cambios
    Switched to a new branch 'readme-cambios'

    ga/rojo$ git status
    # On branch readme-cambios
    nothing to commit (working directory clean)

Realice algunos cambios en la rama, realice el commit y envíelos a Github.

    ga/rojo$ git push origin readme-cambios

Cuando los cambios en la rama estén listos, combínelos con la rama *master*.

    ga/rojo$ git checkout master
    ga/rojo$ git merge readme-cambios

Visualice las ramas
-------------------

Los commits se agregan al log (registro) dentro de Git, permitiendo visualizar los cambios en cada rama en particular.

    ga/rojo$ git log --graph

Use la interfaz GitK para ver esto más gráficamente

    ga/rojo$ gitk

Ejercicios
----------

Realice cambios en README en su repositorio local *rojo* en una nueva rama, realice el *push* (enviar) a Github y realice un *pull* (traer) a una nueva copia local llamada *verde*.

Bifurcando
----------

Para contribuir en el trabajo de otras personas, cree un nuevo *fork* (bifurcación) vía Github, luego clone su bifurcación a su sistema local. Para enviar los cambios, cree un *pull requests* (solicitud de pull).

Para traer los cambios realizados en el trabajo original, deberemos configurar un repositorio local llamado `upstream`.

    ga/rojo$ git remote add upstream git@github.com:<original_author>/<upstream_source>.git

    ga/rojo$ git remote
    origin
    upstream

Para traer los cambios realizados en upstream deberemos ejecutar el siguiente comando:

    ga/rojo$ git pull upstream master

Ejercicio
---------

Bifurque cada uno de los repositorios, clone su bifurcación, realice cambios en *README.md* y cree una solicitud de pull. Puntos extras por crear ramas temáticas.
