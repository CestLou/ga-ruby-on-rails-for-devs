Ruby Básico
===========

Objetivo
---------

Aprender lo básico de Ruby concentrándonos en los conceptos que lo diferencian de otros lenguajes de programación.

Hola Mundo
-----------

    $ ruby -e "puts 'Hola Mundo'"
    Hola Mundo

Vamos a ponerlo en un archivo, `hola.rb`.

``` ruby
puts "Hola Mundo" # Hola Mundo
```

Ejecútelo con `ruby`.

    $ ruby hola.rb
    Hola Mundo

`'Hola Mundo'` es un `String`, `'Hola Mundo'.class` retorna `String`.

``` ruby
puts "Hola Mundo".class # String
puts 'Hola Mundo'.class # String
```

Las cadenas con comillas dobles son expandidas.

``` ruby
world = "Mundo"
puts "Hola #{world}" # Hola Mundo
puts 'Hola #{world}' # Hola #{world}
```

Ejercicio
---------

Encuentre dos maneras de imprimir "Hola Mundo" con las comillas.

``` ruby
"Hola Mundo"
"Hola Mundo"
```

Strings
-------

``` ruby
puts "Hola Mundo".downcase # "hola mundo"
```

Al manipular objetos, en general, nos retorna copias.

``` ruby
s = "Hola Mundo"
puts s.downcase # "hola mundo"
puts s # "Hola Mundo"
```

Las operaciones con el signo de exclamación (!) tienen otras consecuencias, es decir, modifican la misma cadena.

``` ruby
puts s.downcase! # "hola mundo"
puts s # "hola mundo"
```

Las expresiones regulares están incluidas.

``` ruby
puts "Hola Mundo" =~ /Mundo/
```

Puedes declarar cadenas en múltiples líneas con la sintaxis `<<-` (el guión es opcional) o con `%q` seguido por los limitadores de bloque `{}` o `|`.

``` ruby
s = <<-EOS
 Linea 1
 Linea 2
EOS

s = %q|
 Linea 1
 Linea 2
|
```

Bucles
------

Un simple bucle sobre cada elemento de un array. La sintaxis `1..5` crea una instancia de clase, `(1..5).class` retorna `Range` (rango).

``` ruby
# un simple bucle
for i in 1..5
  puts i
end
```

Un bucle con un iterador toma un *bloque*.

``` ruby
# un bucle sobre un array
(1..5).each do |i|
  puts i
end

# un bucle con 5 repeticiones, comenzando en cero
5.times { |i|
  puts i
}
```

Ejercicio
---------

Implementar un bucle que imprima todos los números impares menores a 10.

    1
    3
    5
    7
    9

Condicionales
-------------

If-then-else utiliza `elsif`.

``` ruby
# if / elsif / else
if 2 + 2 == 5
  puts "2+2 es 5"
elsif 2 + 2 == 4
  puts "2+2 es 4"
else
  puts "2+2 es otra cosa"
end
```

La opción `case` evalúa el argumento sólo una vez y `when` puede contener una expresión.

``` ruby
# case / when / else
case 2 + 2
 when 3 + 2 then puts "2+2 es 5"
 when 4 then puts "2+2 es 4"
 else puts "2+2 es otra cosa"
end
```

Arrays
------

Puedes realizar un bucle sobre los elementos de un array. Esto último es comúnmente llamado *contenedor* y puede incluir objetos de cualquier tipo.

``` ruby
[ "rouge", 1, (1..5) ].each do |i|
  puts "#{i} (#{i.class})"
end
```

Los arrays tienen índices desde ambos lados y está permitido acceder por fuera del rango.

``` ruby
numbers = [ 1, 2, 3 ]
puts numbers[0] # 1
puts numbers[-1] # 3
puts numbers[5] # nil, converted to an empty string
puts numbers[5].class # NilClass
```

Las entradas Nil también son objetos.

``` ruby
puts [ 1, nil, 3, 5 ].compact # [ 1, 3, 5]
```

Las matrices anidadas pueden ser acopladas.

``` ruby
puts [ [ 1, 2 ], [ 3 ], [], 4 ].flatten # [ 1, 2, 3, 4 ]
```

Ejercicio
---------

Implemente una sentencia `case` que imprima si un elemento del siguiente array es impar, par o una letra: [ 1, 7, 'A', 2, 'Z' ]

    1: número impar
    7: número impar
    A: letra
    2: número par
    Z: letra

Hashes
------

También conocidos como *diccionarios*. 

``` ruby
hash = { 
  "rojo" => "rouge",
  "amarillo" => "jaune"
}

hash.each do |entrada|
  puts "#{entrada[0]} (#{entrada[0].class}): #{entrada[1]}"
end

hash.each_pair do |nombre, valor|
  puts "#{nombre}: #{valor}"
end
```

Las claves y valores de un Hash pueden ser de cualquier tipo. Es conveniente utilizar *símbolos* para las claves y valores de un Hash.

``` ruby
hash = { 
  :rojo => { :frances => "rouge", :ruso => "красный" },
  :amarillo => { :frances => "jaune", :ruso => "жёлтый" }
}

hash.each_pair do |nombre, valor|
  puts "#{nombre} (#{nombre.class}): #{valor[:frances]}"
end

puts hash[:rojo][:ruso] # "красный"
```

Mapeando
--------

Le aplica un bloque a cada elemento y retorna una nueva colección.

``` ruby
puts [ 1, 2 ].map{ |i| i * 2 } # 2, 4

puts [ 1, nil, 3, 5 ].map { |i| i.nil? } # false, true, false, false
```

Inyectando
----------

``` ruby
[ 1, 2, 3, 4 ].inject(0) { |resultado, elemento| resultado + elemento } # => 10
```

Encadenando
-----------

Los objetos pueden ser adheridos mediante la sentencia `tap`.

``` ruby
1.tap{ |i| puts i }.tap { |i| puts i * 2 } # 1, 2
```

Operadores
----------

Para elevar al cuadrado se realiza lo siguente:

``` ruby
3 ** 2 # retorna 9
```

Se puede insertar un elemento al final de una array mediante la utilización de un método o un operador:

``` ruby
[1,2].push 3 # retorna [1,2,3]

[1,2] << 3 # retorna [1,2,3]
```

El operador `||` comprueba si un valor es `nil` o `false`, y si es así, retorna el valor correspondiente.

``` ruby
nil || "empty" # retorna "empty"

false || "value" # retorna "value"
```

El operador `||=` crea y asigna una variable sólo si ésta es nil o indefinida.

``` ruby
variable ||= "memoized string"
```

A continuación
==============

Demos un vistazo a [Ruby POO](2.2-ruby-oop.md).
