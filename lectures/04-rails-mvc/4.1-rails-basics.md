Rails Básico
============

Rails puede generar una aplicación funcional con solamente una línea de comando.

    $ rails new hello-world

Para ejecutar la aplicación:

    $ cd hello-world
    hello-world$ rails s

    => Booting WEBrick
    => Rails 3.1.0 application starting in development on http://0.0.0.0:3000
    => Call with -d to detach
    => Ctrl-C to shutdown server
    [2011-12-07 16:29:35] INFO  WEBrick 1.3.1
    [2011-12-07 16:29:35] INFO  ruby 1.9.2 (2011-07-09) [x86_64-darwin11.2.0]
    [2011-12-07 16:29:35] INFO  WEBrick::HTTPServer#start: pid=20070 port=3000

Introduzca [localhost:3000](http://localhost:3000) en el navegador para ver su aplicación.

También puede abrir la consola de Rails con `rails c`.

Eso es demasiado fácil. Vamos a construir el esqueleto de una aplicación Rails que muestre páginas estáticas. 

Bundler
-------

Cree una *Gemfile* con el siguiente contenido:

``` ruby
source "http://rubygems.org"

gem "rails", "3.1"
```

Instale la gema.

    $ bundle install
    Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.

    $ rails --version
    Rails 3.1.0

Buteo
-----

En *config/boot.rb* vamos a configurar bundler para que cargue nuestras gemas.

``` ruby
# requiere de rubygems, el cuál sabe cómo cargar las gemas
require 'rubygems'

# requiere de bundler, el que a su vez, cargará todas las gemas
require 'bundler/setup'
```

Aplicación
-----------

La aplicación es declarada en *config/application.rb*.

``` ruby
# carga las librerías necesarias en el buteo
require File.expand_path('../boot', __FILE__)

# el controlador de acciones que maneja los requests
require "action_controller/railtie"

# librerías necesarias para ejecutar la aplicación
# incluye :default y las actuales librerías de entorno
Bundler.require :default, Rails.env

# la aplicación en sí misma
module HelloWorld
  class Application < Rails::Application
    # Configure el encoding por defecto utilizado en los templates para Ruby 1.9.
    config.encoding = "utf-8"
  end
end
```

Entorno
-------

Inicializa la aplicación con todas sus opciones de entorno en *config/environment.rb*.

``` ruby
require File.expand_path('../application', __FILE__)

HelloWorld::Application.initialize!
```

Config.ru
---------

Rails utiliza Rack como manejador básico de HTTP.

Config.ru es una convención en la cual indicamos cómo ejecutar una aplicación basada en Rack. Esto también es llamado realizarle un *rack-up* a la aplicación.

``` ruby
require ::File.expand_path('../config/environment',  __FILE__)

run HelloWorld::Application
```

La llamada `File.expand_path('../config/environment',  __FILE__)` define la dirección absoluta de `config/environment`. Esto permite ejecutar la aplicación desde cualquier ubicación.

Script/rails
------------

Script/rails es automáticamente ejecutado cuando tipeas `rails`. Esto carga `config/application.rb` y `config/boot.rb`.

``` ruby
#!/usr/bin/env ruby

APP_PATH = File.expand_path('../../config/application',  __FILE__)

require File.expand_path('../../config/boot',  __FILE__)
require 'rails/commands'
```

Token criptográfico
-------------------

Un token secreto es necesario para cifrar la información de la sesión. Agregue *config/initializers/secret_token.rb*.

``` ruby
HelloWorld::Application.config.secret_token = "¿porqué el pollo cruzó la carretera?"
```

Página HTML estática
--------------------

Agregue un archivo *public/index.html* con algún contenido HTML básico.

Ejecutando la aplicación
------------------------

    $ rails s

Escriba en el navegador http://localhost:3000 para desplegar el contenido de index.html.

Secuencia de ejecución
----------------------

    $ rails s

    Loading script/rails
    Loading config/boot.rb
    Loading rails/commands
    Loading application.rb
    => Booting WEBrick
    => Rails 3.1.0 application starting in development on http://0.0.0.0:3000
    => Call with -d to detach
    => Ctrl-C to shutdown server
    Loading config.ru
    Loading config/environment.rb
    HelloWorld::Application.initialize!
    Loading config/routes.rb
    Running HelloWorld::Application
    [2011-12-07 17:24:35] INFO  WEBrick 1.3.1
    [2011-12-07 17:24:35] INFO  ruby 1.9.2 (2011-07-09) [x86_64-darwin11.2.0]
    [2011-12-07 17:24:35] INFO  WEBrick::HTTPServer#start: pid=20322 port=3000

A continuación
==============

Demos una mirada a [Aplicación Rails MVC](4.2-rails-mvc-scaffold.md).
