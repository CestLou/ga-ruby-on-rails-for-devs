https://github.com/seyhunak/twitter-bootstrap-rails
rails g bootstrap:install

get rid of index.html


Users
=====



shoulda
shoulda-matchers

require 'spec_helper'

describe User do
  it { should validate_presence_of(:name) }
  it { should validate_presence_of(:email) }
  it { should_not allow_value("foo").for(:email) }
  it { should_not allow_value("@example.com").for(:email) }
  it { should allow_value("foo@example.com").for(:email) }
  context "with an existing user" do
    before :each do
      Fabricate(:user)
    end
    it { should validate_uniqueness_of(:email) }
  end
end

---

fabricators

Fabricator(:user) do
  name { Fabricate.sequence(:name) { |i| "User #{i}" } }
  email { Fabricate.sequence(:email) { |i| "user_#{i}@example.com" } }
end

---

rails generate model User name:string email:string

app/models/user.rb

class User < ActiveRecord::Base
  attr_accessible :name, :email
  validates_uniqueness_of :email
  validates_presence_of :email
  validates :email, :format => { :with => /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i }
  validates_presence_of :name
end

rails generate migration add_email_uniqueness_index

class AddEmailUniquenessIndex < ActiveRecord::Migration
  def up
    add_index :users, :email, :unique => true
  end
  def down
    remove_index :users, :email
  end
end

rake db:migrate

----

add users basic MVC

redirect to signup

match '/signup',  :to => 'users#new'

---

validates :password, :presence => true, :confirmation => true, :length => { :within => 6..40 }

  attr_accessor :password
  attr_accessible :name, :email, :password, :password_confirmation

rails generate migration add_password_to_users encrypted_password:string

  before_save :encrypt_password
      
  def has_password?(pwd)
    self.encrypted_password == encrypt(pwd)
  end
  
  private
    
    def encrypt_password
      self.encrypted_password = encrypt(self.password)
    end
        
    def encrypt(string)
      Digest::SHA2.hexdigest(string)
    end


---

rails generate controller Sessions new

---

resources :sessions, :only => [:new, :create, :destroy]

  match '/signup',  :to => 'users#new'
  match '/signin',  :to => 'sessions#new'
  match '/signout', :to => 'sessions#destroy'
  
